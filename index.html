<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>POS System (Kiosk)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; padding:0; }
  header { background:#222; color:#fff; padding:10px; text-align:center; }
  .screen { display:none; padding:15px; }
  .active { display:block; }
  .items { display:grid; grid-template-columns: repeat(2, 1fr); gap:10px; margin-bottom:15px; }
  .item-btn { padding:20px; border:none; color:#fff; font-size:18px; border-radius:10px; cursor:pointer; }
  /* Sample colors – you can adjust */
  .burger { background:#FF9800; }   /* Orange */
  .fries { background:#FFC107; }    /* Yellow */
  .soda { background:#03A9F4; }     /* Blue */
  .meal { background:#F44336; }     /* Red */
  .rice { background:#4CAF50; }     /* Green */

  .cart { background:#fff; padding:10px; border-radius:10px; min-height:100px; }
  .cart-line { display:flex; align-items:center; margin:5px 0; }
  .cancel-btn { margin-right:8px; padding:2px 6px; font-size:12px; background:#9E9E9E; color:#fff; border:none; border-radius:5px; cursor:pointer; }
  .btn { margin:5px; padding:12px 18px; font-size:16px; border:none; border-radius:8px; cursor:pointer; }
  .subtotal { background:#FFC107; }
  .total { background:#4CAF50; color:#fff; }
  .supervisor { background:#607D8B; color:#fff; }
  .back { background:#9E9E9E; color:#fff; }
  .confirm { background:#2196F3; color:#fff; }
  .cash-btns button { margin:5px; padding:15px; border:none; border-radius:8px; font-size:18px; }
  .log-box { background:#fff; padding:10px; border-radius:10px; max-height:300px; overflow-y:auto; }
</style>
</head>
<body>
<header><h1>POS System</h1></header>

<!-- CASHIER SCREEN -->
<div id="cashier" class="screen active">
  <div class="items" id="itemButtons"></div>

  <div class="cart" id="cart"></div>
  <h3 id="totalDisplay">TOTAL: ₱0</h3>

  <button class="btn subtotal" onclick="showSubtotal()">Subtotal</button>
  <button class="btn total" onclick="goToScreen('tender')">Total / Pay</button>
  <button class="btn supervisor" onclick="goToScreen('supervisor')">Supervisor</button>
</div>

<!-- TENDER SCREEN -->
<div id="tender" class="screen">
  <h2 id="dueDisplay">TOTAL DUE: ₱0</h2>
  <div class="cash-btns">
    <button onclick="setTender(50)">₱50</button>
    <button onclick="setTender(100)">₱100</button>
    <button onclick="setTender(200)">₱200</button>
    <button onclick="setTender(1000)">₱1000</button>
  </div>
  <p>Enter amount: <input type="number" id="customTender" oninput="updateChange()" /></p>
  <h3 id="changeDisplay">Change: ₱0</h3>
  <button class="btn confirm" onclick="confirmPayment()">Confirm Payment</button>
  <button class="btn back" onclick="goToScreen('cashier')">Back</button>
</div>

<!-- SUPERVISOR SCREEN -->
<div id="supervisor" class="screen">
  <h2>Supervisor Login</h2>
  <p>Password: <input type="password" id="supPass" /></p>
  <button class="btn confirm" onclick="checkSupervisor()">Login</button>
  <button class="btn back" onclick="goToScreen('cashier')">Back</button>
  <div id="logs" style="display:none;">
    <h3>Transaction Logs</h3>
    <div class="log-box" id="logBox"></div>
  </div>
</div>

<script>
let cart = [];
let total = 0;
let tender = 0;
const PASSWORD = "pi123"; // mock Pi password

// Items (Supervisor-predefined, cashier cannot change)
const items = [
  { name: "Burger", price: 75, class: "burger" },
  { name: "Fries", price: 45, class: "fries" },
  { name: "Soda", price: 30, class: "soda" },
  { name: "Chicken Meal", price: 120, class: "meal" },
  { name: "Rice", price: 20, class: "rice" }
];

// Render item buttons
function renderItems() {
  const container = document.getElementById("itemButtons");
  container.innerHTML = "";
  items.forEach(i => {
    let btn = document.createElement("button");
    btn.className = `item-btn ${i.class}`;
    btn.innerText = i.name;
    btn.onclick = () => addItem(i.name, i.price);
    container.appendChild(btn);
  });
}

function addItem(name, price) {
  let found = cart.find(i => i.name === name);
  if(found) { found.qty++; found.total = found.qty * found.price; }
  else { cart.push({name, price, qty:1, total:price}); }
  updateCart();
}

function removeItem(name) {
  cart = cart.filter(i => i.name !== name);
  updateCart();
}

function updateCart() {
  let cartDiv = document.getElementById('cart');
  cartDiv.innerHTML = '';
  total = 0;
  cart.forEach(i => {
    let line = document.createElement("div");
    line.className = "cart-line";
    line.innerHTML = `<button class="cancel-btn" onclick="removeItem('${i.name}')">❌</button> ${i.name} x${i.qty} = ₱${i.total}`;
    cartDiv.appendChild(line);
    total += i.total;
  });
  document.getElementById('totalDisplay').innerText = "TOTAL: ₱" + total;
}

function showSubtotal() {
  alert("Subtotal: ₱" + total);
}

function goToScreen(screen) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(screen).classList.add('active');
  if(screen === 'tender') {
    document.getElementById('dueDisplay').innerText = "TOTAL DUE: ₱" + total;
  }
}

function setTender(amount) {
  document.getElementById('customTender').value = amount;
  updateChange();
}

function updateChange() {
  tender = parseFloat(document.getElementById('customTender').value) || 0;
  let change = tender - total;
  document.getElementById('changeDisplay').innerText = "Change: ₱" + (change >= 0 ? change : 0);
}

function confirmPayment() {
  if(tender < total) { alert("Insufficient amount!"); return; }
  saveLog();
  alert("Payment successful! Change: ₱" + (tender - total));
  cart = []; total = 0; tender = 0;
  updateCart();
  document.getElementById('customTender').value = '';
  document.getElementById('changeDisplay').innerText = "Change: ₱0";
  goToScreen('cashier');
}

function saveLog() {
  let logs = JSON.parse(localStorage.getItem('logs') || '[]');
  let date = new Date().toLocaleString();
  let entry = {date, cart:[...cart], total};
  logs.push(entry);
  localStorage.setItem('logs', JSON.stringify(logs));
}

function checkSupervisor() {
  let pass = document.getElementById('supPass').value;
  if(pass === PASSWORD) {
    document.getElementById('logs').style.display = 'block';
    loadLogs();
  } else {
    alert("Wrong password");
  }
}

function loadLogs() {
  let logs = JSON.parse(localStorage.getItem('logs') || '[]');
  let logBox = document.getElementById('logBox');
  logBox.innerHTML = '';
  logs.forEach(l => {
    let items = l.cart.map(i => `${i.name} x${i.qty} ₱${i.total}`).join(', ');
    logBox.innerHTML += `<div>[${l.date}] ${items} → ₱${l.total}</div>`;
  });
}

// Initialize
renderItems();
updateCart();
</script>
</body>
</html>
