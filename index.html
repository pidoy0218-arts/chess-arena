<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>POS System - Full Version</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:Arial, sans-serif; display:flex; height:100vh; }
.cart, .items { padding:10px; box-sizing:border-box; }
.cart { width:50%; background:#f9f9f9; overflow-y:auto; }
.items { width:50%; background:#fff; overflow-y:auto; display:flex; flex-direction:column; }
.item-btn { padding:20px; margin:5px 0; font-size:20px; border:none; border-radius:8px; color:#fff; cursor:pointer; }
.cart-item { display:flex; align-items:center; justify-content:space-between; padding:8px; margin:4px 0; background:#eee; border-radius:6px; }
.cancel-btn { background:#999; color:#fff; border:none; border-radius:4px; padding:2px 6px; margin-right:8px; cursor:pointer; font-size:14px; }
.footer { position:absolute; bottom:0; left:0; width:100%; background:#222; color:#fff; padding:10px; display:flex; flex-wrap:wrap; align-items:center; }
.footer div { margin:5px 10px; font-size:18px; }
.cash-btn { padding:10px 20px; margin:3px; border:none; border-radius:6px; background:#007bff; color:#fff; font-size:16px; cursor:pointer; }
.pay-btn { padding:10px 20px; margin:3px; border:none; border-radius:6px; background:#28a745; color:#fff; font-size:18px; cursor:pointer; flex:1; }
.cash-input { padding:10px; margin:3px; border-radius:6px; border:1px solid #ccc; font-size:16px; width:120px; }
.supervisor-screen { display:none; padding:15px; flex-direction:column; width:100%; background:#f0f0f0; overflow-y:auto; }
.supervisor-screen h2 { margin-top:0; }
.log-box { max-height:400px; overflow-y:auto; background:#fff; padding:10px; border-radius:8px; margin-top:10px; }
.back-btn { padding:10px 20px; margin:3px; border:none; border-radius:6px; background:#999; color:#fff; cursor:pointer; }
</style>
</head>
<body>

<!-- CASHIER SCREEN -->
<div id="cashier-screen" style="display:flex; width:100%; height:100%;">
  <div class="cart" id="cart"></div>
  <div class="items" id="items">
    <button class="item-btn" style="background:#e74c3c" onclick="addItem('Burger',50)">üçî Burger</button>
    <button class="item-btn" style="background:#f39c12" onclick="addItem('Fries',30)">üçü Fries</button>
    <button class="item-btn" style="background:#3498db" onclick="addItem('Coke',20)">ü•§ Coke</button>
    <button class="item-btn" style="background:#27ae60" onclick="addItem('Hotdog',40)">üå≠ Hotdog</button>
    <button class="item-btn" style="background:#9b59b6" onclick="addItem('Iced Tea',25)">üßä Iced Tea</button>
  </div>
</div>

<div class="footer">
  <div id="subtotal">Subtotal: ‚Ç±0</div>
  <div id="total">Total: ‚Ç±0</div>
  <div id="change">Change: ‚Ç±0</div>
  <button class="cash-btn" onclick="cashTender(50)">‚Ç±50</button>
  <button class="cash-btn" onclick="cashTender(100)">‚Ç±100</button>
  <button class="cash-btn" onclick="cashTender(200)">‚Ç±200</button>
  <button class="cash-btn" onclick="cashTender(500)">‚Ç±500</button>
  <button class="cash-btn" onclick="cashTender(1000)">‚Ç±1000</button>
  <input class="cash-input" type="number" id="customCash" placeholder="Enter ‚Ç±" oninput="customCashTender()">
  <button class="pay-btn" onclick="payAndReset()">PAY & RESET</button>
  <button class="cash-btn" onclick="showSupervisor()">Supervisor</button>
</div>

<!-- SUPERVISOR SCREEN -->
<div class="supervisor-screen" id="supervisor-screen">
  <h2>Supervisor Login</h2>
  <p>Password: <input type="password" id="supPass"></p>
  <button onclick="loginSupervisor()">Login</button>
  <button class="back-btn" onclick="hideSupervisor()">Back</button>
  <div id="logSection" style="display:none;">
    <h3>Transaction Logs</h3>
    <div class="log-box" id="logBox"></div>
  </div>
</div>

<script>
let cart = [];
let tendered = 0;
const SUPPASS = "pi123";

// CART FUNCTIONS
function addItem(name, price){
  let found = cart.find(i => i.name===name);
  if(found){ found.qty++; } 
  else { cart.push({name, price, qty:1}); }
  renderCart();
}

function cancelItem(index){
  if(cart[index].qty>1){ cart[index].qty--; }
  else { cart.splice(index,1); }
  renderCart();
}

function renderCart(){
  let cartDiv = document.getElementById("cart");
  cartDiv.innerHTML = "";
  let subtotal=0;
  cart.forEach((item,i)=>{
    subtotal += item.price*item.qty;
    let div = document.createElement("div");
    div.className="cart-item";
    div.innerHTML = `<button class="cancel-btn" onclick="cancelItem(${i})">‚ùå</button>${item.name} x${item.qty} = ‚Ç±${item.price*item.qty}`;
    cartDiv.appendChild(div);
  });
  document.getElementById("subtotal").textContent = "Subtotal: ‚Ç±"+subtotal;
  document.getElementById("total").textContent = "Total: ‚Ç±"+subtotal;
  document.getElementById("change").textContent = "Change: ‚Ç±"+Math.max(0,tendered-subtotal);
}

function cashTender(amount){ tendered=amount; document.getElementById("customCash").value=amount; renderCart(); }
function customCashTender(){ let val=parseFloat(document.getElementById("customCash").value); tendered=isNaN(val)?0:val; renderCart(); }

function payAndReset(){
  if(cart.length===0){ alert("Cart is empty!"); return; }
  let subtotal = cart.reduce((a,b)=>a+b.price*b.qty,0);
  if(tendered<subtotal){ alert("Insufficient cash!"); return; }

  // save transaction
  let logs = JSON.parse(localStorage.getItem("logs")||"[]");
  let date = new Date().toLocaleString();
  logs.push({date, cart:[...cart], total:subtotal});
  localStorage.setItem("logs", JSON.stringify(logs));

  alert("Payment successful! Change: ‚Ç±"+(tendered-subtotal));
  cart=[]; tendered=0; document.getElementById("customCash").value="";
  renderCart();
}

// SUPERVISOR FUNCTIONS
function showSupervisor(){ document.getElementById("supervisor-screen").style.display="flex"; }
function hideSupervisor(){ document.getElementById("supervisor-screen").style.display="none"; document.getElementById("logSection").style.display="none"; document.getElementById("supPass").value=""; }

function loginSupervisor(){
  let pass = document.getElementById("supPass").value;
  if(pass===SUPPASS){
    document.getElementById("logSection").style.display="block";
    loadLogs();
  } else { alert("Wrong password"); }
}

function loadLogs(){
  let logs = JSON.parse(localStorage.getItem("logs")||"[]");
  let logBox = document.getElementById("logBox");
  logBox.innerHTML="";
  logs.forEach(l=>{
    let items = l.cart.map(i=>`${i.name} x${i.qty} ‚Ç±${i.price*i.qty}`).join(", ");
    logBox.innerHTML += `<div>[${l.date}] ${items} ‚Üí ‚Ç±${l.total}</div>`;
  });
}

// INITIAL RENDER
renderCart();
</script>

</body>
</html>
