<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>POS System - Full Supervisor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:Arial, sans-serif; display:flex; flex-direction:column; height:100vh; }
.header { background:#222; color:#fff; padding:10px; text-align:center; font-size:20px; cursor:pointer; }
.cart, .items { padding:10px; box-sizing:border-box; }
.cart { width:50%; background:#f9f9f9; overflow-y:auto; }
.items { width:50%; background:#fff; overflow-y:auto; display:flex; flex-direction:column; max-height:calc(100vh - 160px); }
.item-btn { padding:20px; margin:5px 0; font-size:14px; border:none; border-radius:8px; color:#fff; cursor:pointer; text-align:left; }
.cart-item { display:flex; align-items:center; justify-content:space-between; padding:8px; margin:4px 0; background:#eee; border-radius:6px; }
.cancel-btn { background:#999; color:#fff; border:none; border-radius:4px; padding:2px 6px; margin-right:8px; cursor:pointer; font-size:14px; }
.footer { position:absolute; bottom:0; left:0; width:100%; background:#222; color:#fff; padding:10px; display:flex; flex-wrap:wrap; align-items:center; }
.footer div { margin:5px 10px; font-size:18px; }
.cash-btn { padding:10px 20px; margin:3px; border:none; border-radius:6px; background:#007bff; color:#fff; font-size:16px; cursor:pointer; }
.pay-btn { padding:10px 20px; margin:3px; border:none; border-radius:6px; background:#28a745; color:#fff; font-size:18px; flex:1; cursor:pointer; }
.cash-input { padding:10px; margin:3px; border-radius:6px; border:1px solid #ccc; font-size:16px; width:120px; }

/* Park Sale overlay */
.park-screen {
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(240,240,240,0.95);
  z-index:9999;
  padding:15px; flex-direction:column; overflow-y:auto;
}
.park-screen h2 { margin-top:0; }
.park-btn { padding:8px 15px; margin:5px; border:none; border-radius:6px; background:#007bff; color:#fff; cursor:pointer; }
.back-btn { padding:8px 15px; margin:5px; border:none; border-radius:6px; background:#999; color:#fff; cursor:pointer; }
</style>
</head>
<body>

<!-- Editable Header -->
<div class="header" id="posHeader" onclick="editHeader()">My POS Header</div>

<!-- CASHIER SCREEN -->
<div id="cashier-screen" style="display:flex; flex:1; width:100%;">
  <div class="cart" id="cart"></div>
  <div class="items" id="items"></div>
</div>

<div class="footer">
  <div id="subtotal">Subtotal: ₱0</div>
  <div id="total">Total: ₱0</div>
  <div id="change">Change: ₱0</div>
  <button class="cash-btn" onclick="cashTender(50)">₱50</button>
  <button class="cash-btn" onclick="cashTender(100)">₱100</button>
  <button class="cash-btn" onclick="cashTender(200)">₱200</button>
  <button class="cash-btn" onclick="cashTender(500)">₱500</button>
  <button class="cash-btn" onclick="cashTender(1000)">₱1000</button>
  <input class="cash-input" type="number" id="customCash" placeholder="Enter ₱" oninput="customCashTender()">
  <button class="pay-btn" onclick="payAndReset()">PAY & RESET</button>
  <button class="cash-btn" onclick="showPark()">Park Sale</button>
  <button class="cash-btn" onclick="showSupervisor()">Supervisor</button>
</div>

<!-- PARK SALE SCREEN -->
<div class="park-screen" id="park-screen">
  <h2>Parked Sales</h2>
  <div id="parkList"></div>
  <button class="back-btn" onclick="hidePark()">Back</button>
</div>

<!-- SUPERVISOR SCREEN (unchanged from yours) -->
<div class="supervisor-screen" id="supervisor-screen">
  <!-- your existing supervisor layout here -->
</div>

<script>
let cart = [];
let tendered = 0;
let parked = {}; // store carts by customer number

// Header
function editHeader(){
  let current = document.getElementById("posHeader").innerText;
  let newText = prompt("Edit header:", current);
  if(newText!==null && newText.trim()!==""){
    document.getElementById("posHeader").innerText = newText;
  }
}

// Park Sale
function showPark(){
  const parkList=document.getElementById("parkList");
  parkList.innerHTML="";
  for(let c in parked){
    let btn=document.createElement("button");
    btn.className="park-btn";
    btn.innerText=`Customer ${c}`;
    btn.onclick=()=>loadPark(c);
    parkList.appendChild(btn);
  }
  // add new slot
  let newBtn=document.createElement("button");
  newBtn.className="park-btn";
  newBtn.innerText="➕ New Customer";
  newBtn.onclick=()=>parkCurrent();
  parkList.appendChild(newBtn);

  document.getElementById("park-screen").style.display="flex";
}
function hidePark(){ document.getElementById("park-screen").style.display="none"; }

function parkCurrent(){
  if(cart.length===0){ alert("No items to park."); return; }
  let num=Object.keys(parked).length+1;
  parked[num]=JSON.parse(JSON.stringify(cart));
  cart=[]; renderCart();
  hidePark();
}

function loadPark(num){
  cart=JSON.parse(JSON.stringify(parked[num]));
  delete parked[num]; // remove slot
  renderCart();
  hidePark();
}

// Render Items
function renderItems(){
  const itemsDiv=document.getElementById("items");
  itemsDiv.innerHTML="";
  let items=JSON.parse(localStorage.getItem("ITEMS")||"[]");
  items.forEach(i=>{
    let btn=document.createElement("button");
    btn.className="item-btn";
    btn.style.background=i.color;
    btn.style.color=i.text;
    btn.innerText=`${i.name} - ₱${i.price}`;
    btn.onclick=()=>addItemToCart(i.name,i.price);
    itemsDiv.appendChild(btn);
  });
}

// Cart
function addItemToCart(name, price){
  let f=cart.find(i=>i.name===name);
  if(f) f.qty++; else cart.push({name, price, qty:1});
  renderCart();
}
function cancelItem(index){
  if(cart[index].qty>1) cart[index].qty--; else cart.splice(index,1);
  renderCart();
}
function renderCart(){
  const cartDiv=document.getElementById("cart");
  cartDiv.innerHTML="";
  let subtotal=0;
  cart.forEach((item,i)=>{
    subtotal+=item.price*item.qty;
    let div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`<button class="cancel-btn" onclick="cancelItem(${i})">❌</button>${item.name} x${item.qty} = ₱${item.price*item.qty}`;
    cartDiv.appendChild(div);
  });
  document.getElementById("subtotal").textContent="Subtotal: ₱"+subtotal;
  document.getElementById("total").textContent="Total: ₱"+subtotal;
  document.getElementById("change").textContent="Change: ₱"+Math.max(0,tendered-subtotal);
}
function cashTender(amount){ tendered=amount; document.getElementById("customCash").value=amount; renderCart(); }
function customCashTender(){ let val=parseFloat(document.getElementById("customCash").value); tendered=isNaN(val)?0:val; renderCart(); }

function payAndReset(){
  if(cart.length===0){ alert("Cart is empty!"); return; }
  let subtotal=cart.reduce((a,b)=>a+b.price*b.qty,0);
  if(tendered<subtotal){ alert("Insufficient cash!"); return; }
  alert("Payment successful! Change: ₱"+(tendered-subtotal));
  cart=[]; tendered=0; document.getElementById("customCash").value="";
  renderCart();
}

// init
if(!localStorage.getItem("ITEMS")){
  localStorage.setItem("ITEMS",JSON.stringify([
    {name:"Burger", price:50, color:"#ff9999", text:"#000000"},
    {name:"Fries", price:30, color:"#99ccff", text:"#000000"},
    {name:"Coke", price:20, color:"#ffcc99", text:"#000000"}
  ]));
}
renderItems();
renderCart();
</script>
</body>
</html>
